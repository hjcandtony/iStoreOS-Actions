name: ğŸ’¿ St1_Build-Rootfs-release-oaf
on:
  workflow_dispatch:
    inputs:
      network_settings:
        description: "è¯·é€‰æ‹©åˆå§‹ç½‘ç»œé…ç½®"
        required: true
        default: 'dhcp'
        type: choice
        options:
          - 'static'
          - 'dhcp'
      ipaddr:
        description: 'è¯·è¾“å…¥ç®¡ç†IPï¼ˆé™æ€åœ°å€æ—¶å¿…å¡«ï¼‰'
        required: true
        default: '192.168.5.88'
      gateway:
        description: 'è¯·è¾“å…¥é»˜è®¤ç½‘å…³ï¼ˆé™æ€åœ°å€æ—¶å¿…å¡«ï¼‰'
        required: true
        default: '192.168.5.1'
      include_docker:
        description: "æ˜¯å¦é›†æˆDockeræ’ä»¶"
        required: true
        default: 'yes'
        type: choice
        options:
          - 'yes'
          - 'no'

jobs:
  build:
    runs-on: ubuntu-22.04
    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: âš™ï¸ è®¾ç½®å¯æ‰§è¡Œæƒé™
      run: | 
        chmod +x arm64/build24.sh
        chmod +x shell/*.sh

    - name: âš™ï¸ è®¾ç½®IPå’Œç½‘å…³
      run: |
        CONFIG_PATH="./files/etc/uci-defaults/99-custom.sh"
        echo "å½“å‰ç½‘ç»œé…ç½®è·¯å¾„ï¼š$CONFIG_PATH"
        if [ ! -f "$CONFIG_PATH" ]; then
          echo "é”™è¯¯ï¼šç½‘ç»œé…ç½®æ–‡ä»¶ $CONFIG_PATH ä¸å­˜åœ¨"
          exit 1
        fi
        if [ "${{ inputs.network_settings }}" = "static" ]; then
           echo "åˆ é™¤DHCPé…ç½®ï¼Œä¿ç•™é™æ€é…ç½®"
           sed -i '44,105d' "$CONFIG_PATH"
           sed -i "/ipaddr/s/192.168.5.88/${{ inputs.ipaddr }}/g" "$CONFIG_PATH"
           sed -i "/gateway/s/192.168.5.1/${{ inputs.gateway }}/g" "$CONFIG_PATH"
        else
           echo "åˆ é™¤é™æ€é…ç½®ï¼Œä¿ç•™DHCPé…ç½®"
           sed -i '36,42d' "$CONFIG_PATH"
        fi
        echo "æœ€ç»ˆç½‘ç»œé…ç½®ï¼š"
        cat "$CONFIG_PATH"

    - name: â¬ å®‰è£…å®Œæ•´ä¾èµ–ï¼ˆé€‚é…ImageBuilder+OAFç¼–è¯‘ï¼‰
      run: |
        sudo apt-get update
        sudo apt-get install -y \
          build-essential libncurses5-dev zstd curl unzip tree git \
          libssl-dev python3-distutils libgmp3-dev libmpc-dev \
          file  # è¡¥å……æ–‡ä»¶ç±»å‹è¯†åˆ«å·¥å…·ï¼Œè¾…åŠ©æ ¡éªŒImageBuilderç»“æ„

    - name: â¬ ä¸‹è½½å¹¶ä¿®å¤iStoreOS ImageBuilderï¼ˆé€‚é…ç‰¹æ®Šç›®å½•ç»“æ„ï¼‰
      run: |
        # 1. ä¸‹è½½ImageBuilderï¼ˆä½¿ç”¨æ–‡æ¡£ç¡®è®¤çš„æœ‰æ•ˆé“¾æ¥ï¼‰
        IMAGEBUILDER_URL="https://github.com/Kwonelee/iStoreOS-Actions/releases/download/iStoreOS-ImageBuilder-20250905/istoreos-imagebuilder-armsr-armv8.Linux-x86_64.tar.zst"
        curl -L -o imagebuilder.tar.zst "$IMAGEBUILDER_URL"
        
        # 2. å¼ºåˆ¶å®Œæ•´è§£å‹ï¼ˆé¿å…é»˜è®¤è§£å‹é—æ¼ç›®å½•ï¼‰
        echo "å¼€å§‹å¼ºåˆ¶è§£å‹ImageBuilderï¼ˆä¿ç•™åŸå§‹ç›®å½•ç»“æ„ï¼‰"
        mkdir -p imagebuilder
        tar --use-compress-program=unzstd -xvf imagebuilder.tar.zst -C imagebuilder --strip-components=0
        
        # 3. å®šä½ImageBuilderæ ¸å¿ƒç›®å½•ï¼ˆè§£å†³iStoreOSå¯èƒ½çš„åµŒå¥—ç›®å½•é—®é¢˜ï¼‰
        # æŸ¥æ‰¾åŒ…å«Makefileçš„æ ¸å¿ƒç›®å½•ï¼ˆiStoreOSå¯èƒ½è§£å‹åå¤šä¸€å±‚ç›®å½•ï¼‰
        CORE_DIR=$(find imagebuilder -maxdepth 2 -type f -name "Makefile" | xargs dirname | grep -E "istoreos-imagebuilder-armsr-armv8" | head -n 1)
        if [ -z "$CORE_DIR" ]; then
          # è‹¥æœªæ‰¾åˆ°åµŒå¥—ç›®å½•ï¼Œä½¿ç”¨é»˜è®¤ç›®å½•
          CORE_DIR="imagebuilder"
        fi
        
        # 4. ä¿®æ­£ç›®å½•è·¯å¾„ï¼ˆç¡®ä¿åç»­æ­¥éª¤ä½¿ç”¨æ ¸å¿ƒç›®å½•ï¼‰
        rm -rf imagebuilder_temp
        mv "$CORE_DIR" imagebuilder_temp
        rm -rf imagebuilder
        mv imagebuilder_temp imagebuilder
        
        # 5. é€‚é…iStoreOSç›®å½•ç»“æ„ï¼šæ£€æŸ¥å…³é”®ç›®å½•ï¼Œç¼ºå¤±åˆ™æ‰‹åŠ¨åˆ›å»º
        echo "æ ¡éªŒå¹¶ä¿®å¤ImageBuilderç›®å½•ç»“æ„..."
        # æ£€æŸ¥Makefileï¼ˆæ ¸å¿ƒæ–‡ä»¶ï¼Œå¿…é¡»å­˜åœ¨ï¼‰
        if [ ! -f "imagebuilder/Makefile" ]; then
          echo "é”™è¯¯ï¼šImageBuilderæ ¸å¿ƒMakefileç¼ºå¤±"
          exit 1
        fi
        # æ£€æŸ¥packageç›®å½•ï¼ˆOAFæºç å­˜æ”¾è·¯å¾„ï¼Œç¼ºå¤±åˆ™åˆ›å»ºï¼‰
        if [ ! -d "imagebuilder/package" ]; then
          echo "è­¦å‘Šï¼špackageç›®å½•ç¼ºå¤±ï¼Œæ‰‹åŠ¨åˆ›å»º"
          mkdir -p imagebuilder/package
        fi
        # æ£€æŸ¥binç›®å½•ï¼ˆç¼–è¯‘è¾“å‡ºè·¯å¾„ï¼Œç¼ºå¤±åˆ™åˆ›å»ºï¼‰
        if [ ! -d "imagebuilder/bin" ]; then
          echo "è­¦å‘Šï¼šbinç›®å½•ç¼ºå¤±ï¼Œæ‰‹åŠ¨åˆ›å»º"
          mkdir -p imagebuilder/bin
        fi
        # æ£€æŸ¥build_dirç›®å½•ï¼ˆç¼–è¯‘ä¸´æ—¶è·¯å¾„ï¼Œç¼ºå¤±åˆ™åˆ›å»ºï¼‰
        if [ ! -d "imagebuilder/build_dir" ]; then
          echo "è­¦å‘Šï¼šbuild_dirç›®å½•ç¼ºå¤±ï¼Œæ‰‹åŠ¨åˆ›å»º"
          mkdir -p imagebuilder/build_dir
        fi
        
        # 6. è¾“å‡ºæœ€ç»ˆç›®å½•ç»“æ„ï¼ˆä¾¿äºè°ƒè¯•ï¼‰
        echo "ImageBuilderæœ€ç»ˆç›®å½•ç»“æ„ï¼ˆæ ¸å¿ƒç›®å½•ï¼‰ï¼š"
        tree -L 2 imagebuilder/ --dirsfirst

    - name: â¬ å…‹éš†OpenAppFilteræºç ï¼ˆç¡®ä¿ImageBuilderèƒ½è¯†åˆ«ï¼‰
      run: |
        # å…‹éš†OAFåˆ°ImageBuilderçš„packageç›®å½•ï¼ˆæ ¸å¿ƒè·¯å¾„ï¼Œä¸å¯ä¿®æ”¹ï¼‰
        OAF_TARGET_DIR="imagebuilder/package/OpenAppFilter"
        git clone https://github.com/destan19/OpenAppFilter.git "$OAF_TARGET_DIR"
        
        # æ ¡éªŒOAFä¸‰ä¸ªæ ¸å¿ƒç»„ä»¶ï¼ˆå¿…é¡»å­˜åœ¨ï¼Œå¦åˆ™ç¼–è¯‘ä¼šå¤±è´¥ï¼‰
        OAF_COMPONENTS=("luci-app-oaf" "oaf" "open-app-filter")
        for comp in "${OAF_COMPONENTS[@]}"; do
          comp_path="$OAF_TARGET_DIR/$comp"
          if [ ! -d "$comp_path" ]; then
            echo "é”™è¯¯ï¼šOAFæ ¸å¿ƒç»„ä»¶ $comp ç¼ºå¤±ï¼ˆè·¯å¾„ï¼š$comp_pathï¼‰"
            exit 1
          fi
          # é¢å¤–æ ¡éªŒç»„ä»¶çš„Makefileï¼ˆç¡®ä¿å¯ç¼–è¯‘ï¼‰
          if [ ! -f "$comp_path/Makefile" ]; then
            echo "é”™è¯¯ï¼šOAFç»„ä»¶ $comp ç¼ºå¤±Makefileï¼ˆè·¯å¾„ï¼š$comp_path/Makefileï¼‰"
            exit 1
          fi
        done
        echo "OAFæºç å…‹éš†å®Œæˆï¼Œæ ¸å¿ƒç»„ä»¶ç›®å½•ï¼š"
        ls -l "$OAF_TARGET_DIR"

    - name: â¬ å¤åˆ¶å¿…å¤‡æ–‡ä»¶å¹¶é…ç½®ImageBuilder
      run: |
        # å¤åˆ¶è‡ªå®šä¹‰æ„å»ºè„šæœ¬ï¼ˆç¡®ä¿è„šæœ¬è·¯å¾„æ­£ç¡®ï¼‰
        cp arm64/{build24.sh,Makefile} imagebuilder/
        cp shell/{prepare-packages.sh,custom-packages.sh} imagebuilder/
        # å¤åˆ¶é¢„ç¼–è¯‘IPKï¼ˆè‹¥æœ‰ï¼Œæ— åˆ™è·³è¿‡ï¼‰
        if [ -d "files/packages" ]; then
          find "files/packages" -name "*.ipk" -exec cp {} imagebuilder/packages/ \;
        else
          echo "è­¦å‘Šï¼šfiles/packagesç›®å½•ä¸å­˜åœ¨ï¼Œè·³è¿‡é¢„ç¼–è¯‘IPKå¤åˆ¶"
          mkdir -p imagebuilder/packages
        fi
        
        # åˆ›å»ºç³»ç»Ÿé…ç½®ç›®å½•ï¼ˆç¡®ä¿é…ç½®èƒ½è¢«ç³»ç»ŸåŠ è½½ï¼‰
        mkdir -p imagebuilder/files/etc/{uci-defaults,opkg,banner1,openclash/core}
        cp files/etc/uci-defaults/99-custom.sh imagebuilder/files/etc/uci-defaults/
        cp files/etc/opkg/distfeeds.conf imagebuilder/files/etc/opkg/
        cp files/etc/banner imagebuilder/files/etc/banner1/
        cp files/etc/openclash/core/clash_meta imagebuilder/files/etc/openclash/core/
        cp files/etc/rc.local imagebuilder/files/etc/
        
        # é…ç½®ImageBuilderè¾“å‡ºæ ¼å¼ï¼ˆå¼ºåˆ¶å¯ç”¨rootfs.tar.gzï¼‰
        cd imagebuilder
        # å…ˆåˆ é™¤åŸæœ‰é…ç½®ï¼ˆé¿å…é‡å¤é…ç½®å†²çªï¼‰
        sed -i '/CONFIG_TARGET_ROOTFS_TARGZ/d' .config
        sed -i '/CONFIG_TARGET_ROOTFS_SQUASHFS/d' .config
        sed -i '/CONFIG_TARGET_IMAGES_GZIP/d' .config
        # å†™å…¥æ–°é…ç½®
        echo "CONFIG_TARGET_ROOTFS_TARGZ=y" >> .config  # å¯ç”¨rootfså‹ç¼©åŒ…
        echo "# CONFIG_TARGET_ROOTFS_SQUASHFS is not set" >> .config  # ç¦ç”¨SQUASHFS
        echo "# CONFIG_TARGET_IMAGES_GZIP is not set" >> .config  # ç¦ç”¨é¢å¤–GZIP
        
        # é…ç½®OAFç¼–è¯‘é€‰é¡¹ï¼ˆç›´æ¥å†™.configï¼ŒImageBuilderè‡ªåŠ¨å¤„ç†ä¾èµ–ï¼‰
        sed -i '/CONFIG_PACKAGE_luci-app-oaf/d' .config
        sed -i '/CONFIG_PACKAGE_oaf/d' .config
        sed -i '/CONFIG_PACKAGE_open-app-filter/d' .config
        sed -i '/CONFIG_PACKAGE_luci-i18n-oaf-zh-cn/d' .config
        echo "CONFIG_PACKAGE_luci-app-oaf=y" >> .config          # OAF Webç•Œé¢
        echo "CONFIG_PACKAGE_oaf=y" >> .config                # OAFå†…æ ¸æ¨¡å—
        echo "CONFIG_PACKAGE_open-app-filter=y" >> .config    # OAFæœåŠ¡æ ¸å¿ƒ
        echo "CONFIG_PACKAGE_luci-i18n-oaf-zh-cn=y" >> .config# OAFä¸­æ–‡è¯­è¨€åŒ…
        
        # é…ç½®Dockerï¼ˆæ ¹æ®è¾“å…¥å‚æ•°ï¼‰
        if [ "${{ inputs.include_docker }}" = "yes" ]; then
          sed -i '/CONFIG_PACKAGE_docker/d' .config
          sed -i '/CONFIG_PACKAGE_docker-compose/d' .config
          echo "CONFIG_PACKAGE_docker=y" >> .config
          echo "CONFIG_PACKAGE_docker-compose=y" >> .config
        fi

    - name: ğŸ› ï¸ ä¿®å¤build24.shï¼ˆç¡®ä¿OAFè¢«æ­£ç¡®çº³å…¥æ„å»ºï¼‰
      run: |
        # 1. æ¸…é™¤åŸæœ‰OAFç›¸å…³é…ç½®ï¼ˆé¿å…é‡å¤ï¼‰
        sed -i '/oaf/d' imagebuilder/build24.sh
        sed -i '/open-app-filter/d' imagebuilder/build24.sh
        
        # 2. å†™å…¥æ–°çš„OAFé…ç½®ï¼ˆç¡®ä¿PACKAGESå˜é‡æ­£ç¡®æ·»åŠ ï¼‰
        echo '#' >> imagebuilder/build24.sh
        echo '# æ·»åŠ OpenAppFilteræ ¸å¿ƒç»„ä»¶' >> imagebuilder/build24.sh
        echo 'PACKAGES="$PACKAGES luci-app-oaf"' >> imagebuilder/build24.sh
        echo 'PACKAGES="$PACKAGES oaf"' >> imagebuilder/build24.sh
        echo 'PACKAGES="$PACKAGES open-app-filter"' >> imagebuilder/build24.sh
        echo 'PACKAGES="$PACKAGES luci-i18n-oaf-zh-cn"' >> imagebuilder/build24.sh
        
        # 3. é…ç½®Dockerï¼ˆæ ¹æ®è¾“å…¥å‚æ•°ï¼‰
        if [ "${{ inputs.include_docker }}" = "yes" ]; then
          echo '#' >> imagebuilder/build24.sh
          echo '# æ·»åŠ Dockerç»„ä»¶' >> imagebuilder/build24.sh
          echo 'PACKAGES="$PACKAGES docker docker-compose"' >> imagebuilder/build24.sh
        fi
        
        # 4. éªŒè¯é…ç½®ç»“æœ
        echo "build24.shä¸­OAFå’ŒDockeré…ç½®ï¼š"
        grep -E "oaf|open-app-filter|docker" imagebuilder/build24.sh

    - name: ğŸ§± ç¼–è¯‘OAFç»„ä»¶ï¼ˆé€‚é…iStoreOS ImageBuilderï¼‰
      working-directory: ./imagebuilder
      run: |
        # å…³é”®ï¼šä½¿ç”¨ImageBuilderçš„package/compileå‘½ä»¤ï¼ŒæŒ‡å®š-j4åŠ é€Ÿç¼–è¯‘
        echo "å¼€å§‹ç¼–è¯‘OAF Webç•Œé¢ï¼ˆluci-app-oafï¼‰"
        make package/OpenAppFilter/luci-app-oaf/compile V=s -j4
        echo "å¼€å§‹ç¼–è¯‘OAFå†…æ ¸æ¨¡å—ï¼ˆoafï¼‰"
        make package/OpenAppFilter/oaf/compile V=s -j4
        echo "å¼€å§‹ç¼–è¯‘OAFæœåŠ¡æ ¸å¿ƒï¼ˆopen-app-filterï¼‰"
        make package/OpenAppFilter/open-app-filter/compile V=s -j4
        
        # æ ¡éªŒOAFç¼–è¯‘ç»“æœï¼ˆæŸ¥æ‰¾IPKæ–‡ä»¶ï¼Œç¡®ä¿ç”Ÿæˆï¼‰
        echo "æŸ¥æ‰¾OAFç¼–è¯‘ç”Ÿæˆçš„IPKæ–‡ä»¶ï¼š"
        OAF_IPKS=$(find bin/ packages/ -name "oaf*.ipk" -o -name "open-app-filter*.ipk" 2>/dev/null)
        if [ -z "$OAF_IPKS" ]; then
          echo "é”™è¯¯ï¼šOAFç»„ä»¶ç¼–è¯‘å¤±è´¥ï¼Œæœªç”Ÿæˆä»»ä½•IPKæ–‡ä»¶"
          # è¾“å‡ºç¼–è¯‘æ—¥å¿—è·¯å¾„ï¼ˆä¾¿äºè°ƒè¯•ï¼‰
          echo "ç¼–è¯‘æ—¥å¿—è·¯å¾„ï¼šbuild_dir/target-aarch64_generic_musl/OpenAppFilter/"
          ls -l build_dir/target-aarch64_generic_musl/OpenAppFilter/ 2>/dev/null
          exit 1
        fi
        echo "OAFç¼–è¯‘ç”Ÿæˆçš„IPKæ–‡ä»¶ï¼š"
        echo "$OAF_IPKS"

    - name: ğŸ§± æ„å»ºiStoreOS-rootfsï¼ˆé›†æˆOAFï¼‰
      working-directory: ./imagebuilder
      run: |
        # å…ˆç»™build24.shæ·»åŠ æ‰§è¡Œæƒé™ï¼ˆé¿å…æƒé™ä¸è¶³ï¼‰
        chmod +x build24.sh
        # æ‰§è¡Œæ„å»ºè„šæœ¬
        echo "æ‰§è¡Œæ„å»ºè„šæœ¬ï¼šbuild24.sh"
        bash ./build24.sh
        
        # æ ¡éªŒrootfsç”Ÿæˆç»“æœï¼ˆå¿…é¡»æ‰¾åˆ°rootfs.tar.gzï¼‰
        ROOTFS_PATH=$(find bin/targets/armsr/armv8 -name "*generic-rootfs.tar.gz" 2>/dev/null)
        if [ -z "$ROOTFS_PATH" ]; then
          echo "é”™è¯¯ï¼šrootfsæ„å»ºå¤±è´¥ï¼Œæœªæ‰¾åˆ° *generic-rootfs.tar.gz"
          echo "binç›®å½•ç»“æ„ï¼š"
          tree bin/targets/armsr/armv8/ 2>/dev/null
          exit 1
        fi
        echo "rootfsæ„å»ºæˆåŠŸï¼Œæ–‡ä»¶è·¯å¾„ï¼š$ROOTFS_PATH"
        echo "rootfsæ–‡ä»¶å¤§å°ï¼š$(du -sh "$ROOTFS_PATH")"

    - name: ğŸ“Œ åˆ†ç±»æ”¶é›†OAFç»„ä»¶IPK
      id: collect_ipks
      run: |
        # åˆ›å»ºåˆ†ç±»ç›®å½•
        mkdir -p openappfilter_ipk/{oaf-core,oaf-service,oaf-web,oaf-language}
        # æ”¶é›†IPKï¼ˆé€‚é…ä¸åŒè¾“å‡ºè·¯å¾„ï¼‰
        find imagebuilder/bin/ imagebuilder/packages/ -name "oaf_*.ipk" -exec cp {} openappfilter_ipk/oaf-core/ \; -print
        find imagebuilder/bin/ imagebuilder/packages/ -name "open-app-filter_*.ipk" -exec cp {} openappfilter_ipk/oaf-service/ \; -print
        find imagebuilder/bin/ imagebuilder/packages/ -name "luci-app-oaf_*.ipk" -exec cp {} openappfilter_ipk/oaf-web/ \; -print
        find imagebuilder/bin/ imagebuilder/packages/ -name "luci-i18n-oaf-zh-cn*.ipk" -exec cp {} openappfilter_ipk/oaf-language/ \; -print
        
        # æ ¡éªŒæ”¶é›†ç»“æœ
        IPK_TOTAL=$(find openappfilter_ipk -name "*.ipk" | wc -l)
        echo "å…±æ”¶é›†åˆ° $IPK_TOTAL ä¸ªOAFç›¸å…³IPKæ–‡ä»¶"
        if [ $IPK_TOTAL -lt 3 ]; then
          echo "è­¦å‘Šï¼šOAF IPKæ–‡ä»¶ä¸è¶³3ä¸ªï¼Œå¯èƒ½å­˜åœ¨é—æ¼"
        else
          echo "OAF IPKæ”¶é›†å®Œæˆï¼Œç›®å½•ç»“æ„ï¼š"
          tree openappfilter_ipk/
        fi

    - name: ğŸš€ ä¸Šä¼ åˆ°Releaseï¼ˆå«Rootfs+OAFç»„ä»¶ï¼‰
      uses: softprops/action-gh-release@v2.2.1
      with:
        tag_name: iStoreOS-24.10-RELEASE-${{ inputs.network_settings }}-${{ github.run_id }}
        name: iStoreOS-24.10ï¼ˆOAFé˜²æ²‰è¿·ï¼‰-${{ inputs.network_settings }}
        body: |
          ## ğŸ“Œ ç‰ˆæœ¬ä¿¡æ¯
          - ç³»ç»Ÿï¼šiStoreOS-24.10.2-RELEASEï¼ˆarmsr-armv8æ¶æ„ï¼‰
          - ç½‘ç»œï¼š${{ inputs.network_settings }}ï¼ˆIPï¼š${{ inputs.network_settings == 'static' && inputs.ipaddr || '192.168.100.1/åŠ¨æ€è·å–' }}ï¼‰
          - Dockerï¼š${{ inputs.include_docker == 'yes' && 'å·²é›†æˆ' || 'æœªé›†æˆ' }}

          ## ğŸ§© OAFç»„ä»¶è¯´æ˜
          | ç»„ä»¶ç›®å½•       | åŠŸèƒ½è¯´æ˜                  | å¿…è£…ä¸å¦ |
          |----------------|---------------------------|----------|
          | oaf-core       | OAFå†…æ ¸æ¨¡å—ï¼ˆåº•å±‚è¿‡æ»¤ï¼‰   | æ˜¯       |
          | oaf-service    | OAFæœåŠ¡æ ¸å¿ƒï¼ˆè§„åˆ™ç®¡ç†ï¼‰   | æ˜¯       |
          | oaf-web        | OAF Webç•Œé¢ï¼ˆLuCIæ“ä½œï¼‰   | æ˜¯       |
          | oaf-language   | OAFä¸­æ–‡è¯­è¨€åŒ…ï¼ˆæ˜¾ç¤ºä¼˜åŒ–ï¼‰ | å¦       |

          ## ğŸ”‘ ç™»å½•ä¿¡æ¯
          - ç”¨æˆ·åï¼šroot
          - å¯†ç ï¼šæ— ï¼ˆé¦–æ¬¡ç™»å½•éœ€è®¾ç½®ï¼‰

          ## ğŸ“‚ ä¸‹è½½æ–‡ä»¶
          - ç³»ç»Ÿé•œåƒï¼š`*generic-rootfs.tar.gz`ï¼ˆå·²é›†æˆOAFï¼‰
          - OAFå•ç‹¬ç»„ä»¶ï¼šå„åˆ†ç±»ç›®å½•ä¸‹çš„.ipkæ–‡ä»¶
        files: |
          imagebuilder/bin/targets/armsr/armv8/*generic-rootfs.tar.gz
          openappfilter_ipk/oaf-core/*.ipk
          openappfilter_ipk/oaf-service/*.ipk
          openappfilter_ipk/oaf-web/*.ipk
          openappfilter_ipk/oaf-language/*.ipk
      env:
        GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}
